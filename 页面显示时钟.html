<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>时钟</title>
    <style>
        .box {
            width: 600px;
            height: 600px;
            border: 1px dashed #DBD0A7;
            margin: 10px auto;
            position: relative;
        }
        canvas{
            display: block;
            margin:10px auto;
        }
        .showTime {
            position: absolute;
            right: 50px;
            bottom: 50px;
        }

        .showTime ul {
            list-style: none;
        }

        ul li {
            float: left;
            width: 30px;
            height: 30px;
            line-height: 30px;
            text-align: center;
            font-size: 30px;
            font-weight: 700;
        }
    </style>
</head>

<body>
    <div class="box">
        <canvas></canvas>
        <div class="showTime">
            <ul>
                <li></li>
                <li>:</li>
                <li></li>
                <li>:</li>
                <li></li>
            </ul>
        </div>
    </div>

</body>

</html>
<script>
    //获取需要操作的对象
    var timeLi = document.querySelectorAll('ul>li');
    console.log(timeLi)
    var cvs = document.querySelector('canvas');
    cvs.width = 500;
    cvs.height = 500;

    //获取绘制环境对象
    var ctx = cvs.getContext('2d');

    //
    function clock() {
        //没调用一次清除当前画布
        ctx.clearRect(0, 0, cvs.width, cvs.height);

        //获取本地时间
        var date = new Date(); //获取当前的时间

        var hours = date.getHours();
        var minutes = date.getMinutes();
        var seconds = date.getSeconds();

        console.log(hours + '|' + minutes + '|' + seconds);

        hours = Math.floor(hours + minutes / 60);
        //将时间添加到页面中li

        hour = hours < 10 ? '0' + hours : hours;
        min =minutes < 10 ? '0' + minutes : minutes;
        sec =seconds < 10 ? '0' + seconds : seconds;

        timeLi[0].innerHTML = hour;
        timeLi[2].innerHTML = min;
        timeLi[4].innerHTML = sec;

        ctx.save();
        ctx.translate(250, 250); //设置坐标的原点在正中心

        //
        ctx.beginPath();


        //绘制一个表盘，圆心为 300，300，半径为200 
        ctx.lineWidth = 10;
        ctx.arc(0, 0, 200, 0, Math.PI * 2);
        ctx.fillStyle = 'yellowgreen';
        ctx.fill();
        ctx.strokeStyle = 'vlack';
        ctx.stroke();


        //画分钟刻度线
        for (var i = 0; i < 60; i++) {
            //清除当前路径
            ctx.beginPath();
            //设置起点坐标
            ctx.moveTo(190, 0);

            ctx.lineWidth = 4;
            //绘制子路径        
            ctx.lineTo(200, 0);
            //设置颜色样式
            ctx.strokeStyle = 'red';
            ctx.stroke();
            //每个30deg画一个时钟刻度线
            ctx.rotate(Math.PI / 30);
        }

        //画时钟刻度线
        for (var i = 0; i < 12; i++) {
            //清除当前路径
            ctx.beginPath();
            //设置起点坐标
            ctx.moveTo(180, 0);

            ctx.lineWidth = 6;
            //绘制子路径        
            ctx.lineTo(200, 0);
            //设置颜色样式
            ctx.strokeStyle = 'black';
            ctx.stroke();
            //每个30deg画一个时钟刻度线
            ctx.rotate(Math.PI / 6);
        }

        //添加时钟数字
        var deg = 2 * Math.PI / 12;
        for (var i = 1; i < 13; i++) {
            //设置数字的坐标
            var x = Math.sin(i * deg);
            var y = Math.cos(i * deg);

            ctx.font = '700 30px safria';
            ctx.fillStyle = 'hotpink';
            //设置数字的对其方式
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(i, x * 160, -y * 160);
        }

        //清除当前路径
        ctx.beginPath();

        //画时针
        ctx.save();
        //当时间超过12数字时，重新从0开始
        hours = hours > 12 ? (hours - 12) : hours;
        //时钟走过多少角度;
        var degree = hours + minutes / 60 + seconds / 3600;
        console.log(degree);
        ctx.rotate(Math.PI / 6 * (hours + minutes / 60 + seconds / 3600)); //时钟是60°走一格
        ctx.moveTo(0, 0);
        ctx.lineWidth = 8;
        ctx.lineCap = 'round';
        ctx.lineTo(0, -120);

        ctx.strokeStyle = 'skyblue';
        ctx.stroke();
        ctx.restore();

        //清除当前路径
        ctx.beginPath();

        //画分针
        ctx.save();
        //分钟走过多少角度：
        var degMinute = minutes + seconds / 60;
        console.log(degMinute);
        ctx.rotate(Math.PI / 30 * (minutes + seconds / 60)); //分钟是6°走一格
        ctx.moveTo(0, 0);
        ctx.lineWidth = 5;
        ctx.lineCap = 'round';
        ctx.lineTo(0, -100);

        ctx.strokeStyle = 'green';
        ctx.stroke();
        ctx.restore();

        //清除当前路径
        ctx.beginPath();

        //画秒针
        ctx.save();
        ctx.rotate(Math.PI / 30 * seconds); //秒钟是6°走一格
        ctx.moveTo(0, 0);
        ctx.lineWidth = 3;
        ctx.lineCap = 'round';
        ctx.lineTo(0, -150);

        ctx.strokeStyle = 'black';
        ctx.stroke();
        ctx.restore();

        ctx.restore();
    }
    clock();
    setInterval(clock, 1000);
</script>