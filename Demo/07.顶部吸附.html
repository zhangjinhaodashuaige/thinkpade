<!DOCTYPE html>
<html>

<head lang="en">
    <meta charset="UTF-8">
    <title>防腾讯固定导航栏</title>
    <style type="text/css">
    * {
        margin: 0;
        padding: 0;
    }
    
    .main {
        width: 1000px;
        margin: 0 auto;
    }
    </style>
    <script type="text/javascript" src="js/jquery-1.12.4.min.js"></script>
    <script type="text/javascript">
       $(function(){
           // 在这里获取高度 会有只是Dom元素创建好了就会触发 可能出现 由于图片还未加载完 高度不正确问题
           console.log($('.top').height());
       })
       $(window).on('load',function(){
         // 顶部高度
         var headerHeight = $('.top').height();

         // 注册滚动事件
         $(window).scroll(function(){
             console.log($(document).scrollTop());

             // 如果 滚动距离 超过了 headerHeight 固定定位 设置top
             if($(document).scrollTop()>headerHeight){
                 // 添加定位
                 $('.nav').css({
                     position:'fixed',
                     top:0
                 })
                //  设置main的 padding top
                $('.main').css({
                    paddingTop:$('.nav').height()
                })
             }else{
                 $('.nav').css('position','static');
                 $('.main').css('padding-top',0);
             }
         })  
       })
    </script>
</head>

<body>
    <div class="top">
        <img src="img/top.png" />
    </div>
    <div class="nav">
        <img src="img/nav.png" />
    </div>
    <div class="main">
        <img src="img/main.png" />
    </div>
</body>

</html>
