<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<!--
如果要看到网站的图片
1.向服务器请求资源
2.接收资源进行解析
3.渲染-->

<img src="../images/l1.jpg" alt="">
<!--../images/l1.jpg  data这种方式要发送请求，从服务器获得资源-->
<!--dataURL:这个URL中直接包含资源的数据 -->



<!--readAsText：该方法有两个参数，其中第二个参数是文本的编码方式
，默认值为 UTF-8。这个方法非常容易理解，将文件以文本方式读取，读取的结果即是这个文本文件中的内容。文本文件就是可以使用.txt打开的文件
    readAsBinaryString：该方法将文件读取为二进制字符串，通常我们将它传送到后端，后端可以通过这段字符串存储文件。一般来说它是用来读取文件进行传输，其它对象接收之后再进行数据的存储
    readAsDataURL：读取文件获取以data-开头的字符串值，它的本质是一个dataURL类型的字符串，dataURL就是一种将文件(文件一般就是指图片或者能够嵌入到文档的类型)嵌入到文档的方式，将数据直接嵌入在url中，可以提高展示效率
    -->
<!--需求：即时预览（既不用提交，不经过服务器，直接预览你上传的图片）
即时：onchange:当内容发生改变的时候会触发当前事件
预览：readAsDataURL:获取包含资源数据的dataURL,赋值给src-->
<form action="">
    <!--onchange（事件）只要当前内容有改变或者状态有改变就会触发这个事件（这是以行内方式写的事件）-->
    文件：<input type="file" id="myFile" onchange="readerData();"> <br>
    <input type="submit">
</form>
<script>
    function readerData() {
        var file = document.querySelector("#myFile");
        var img = document.querySelector("img");
        /*files：就是当前通过file元素选择的所有文件列表文件，是以数组的形式存在的*/
        console.log(file.files[0]);
        /*1.创建文件读取对象*/
        var reader = new FileReader();
        /*2.调用这个对象的readAsDataURL方法读取图片资源*/
        reader.readAsDataURL(file.files[0]);
        /*数据读取完毕之后，会将数据存储在读取对象的result属性中。
        如果读取成功，就能够获取到dataURL格式的数据（就是链接图片资源数据），如果读取失败，就返回null*/
        /*FileReader 提供一系列的事件用来监听当前读取文件的状态
         onabort	中断时触发
         onerror	出错时触发
         onload	文件读取成功完成时触发  ***
         onloadend	读取完成触发，无论成功或失败  ***
         onloadstart	读取开始时触发
         onprogress	读取中
         */
        reader.onload = function (e) {
            //e.loaded当前进度，e.total总进度，可以做文件上传的进度条，e.loaded/e.total比
            console.log(e);
            var result = reader.result;
            img.src = result;
        }
    }
</script>
</body>
</html>